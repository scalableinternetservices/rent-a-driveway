
<link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.8.3/jquery.timepicker.min.css">
<script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.8.3/jquery.timepicker.min.js"></script>
<%#This script is for google map api and figure out the current long lat%>
<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>

<!-- This form is not supposed to post anything
    Instead, we use jquery to intercept, perform geocode search
    Then update the map below to show available listings
    For more info look for js/search_location.js
-->
<form method="get" id="search_location_form" action="/" >
	<div id="search_options">
		<h2 class="green">Search</h2>
		<table>
			<tr>
				<th>
					<label for="location">Location:</label>
				</th>
				<td>
					<input class="form-control" type="text" id="location_input" name="location"></input>
          <input type="hidden" id="latitude" name="latitude"></input>

					<input type="hidden" id="longitude" name="longitude"</input>
				<td>
			</tr>
			<tr>
				<th>
					<label for="start_time">Start time:</label>
				</th>
				<td>
					<div class="row">
						<div class="col-md-5">
							<input class="form-control" type="text" id="start_date" name="start_date"></input>
						</div>
						<div class="col-md-5 col-md-offset-1">
							<input class="form-control" type="text" id="start_time" name="start_time"></input>
						</div>
					</div>
				<td>
			</tr>
			<tr>
				<th>
					<label for="end_time">End time:</label>
				</th>
				<td>
					<div class="row">
						<div class="col-md-5">
							<input class="form-control" type="text" id="end_date" name="end_date"></input>
						</div>
						<div class="col-md-5 col-md-offset-1">
							<input class="form-control" type="text" id="end_time" name="end_time"></input>
						</div>
					</div>
				<td>
			</tr>
		</table>
		<input type="submit" value="Search">
    </div>
</form>

<div id="map" style="height: 500px;"></div>

<script>
		handler = Gmaps.build('Google');
		handler.buildMap({ provider: { Zoom: 15 }, internal: {id: 'map'}}, function(){
		  markers = handler.addMarkers(<%= raw @markers.to_json %>);
		  handler.bounds.extendWith(markers);
		  handler.map.centerOn({"lat": <%= @cur_lat %>, "lng": <%= @cur_lng %>});
		});
	$("#start_date").datepicker({"dateFormat": "yy-mm-dd"});
	$("#start_time").timepicker();
	$("#end_date").datepicker({"dateFormat": "yy-mm-dd"});
	$("#end_time").timepicker();
</script>
